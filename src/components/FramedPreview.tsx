J3VzZSBjbGllbnQnOwoKaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7Cgpjb25zdCBGUkFNRV9IRVg6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7CiAgJ2JsYWNrJzogJyMxYTFhMWEnLAogICd3aGl0ZSc6ICcjZjVmNWY1JywKICAnbmF0dXJhbCc6ICcjYzRhODgyJywKICAnYW50aXF1ZS1zaWx2ZXInOiAnI2E4YThhOCcsCiAgJ2Jyb3duJzogJyM1YzNkMmUnLAogICdhbnRpcXVlLWdvbGQnOiAnI2I4OWE1YScsCiAgJ2RhcmstZ3JleSc6ICcjNGE0YTRhJywKICAnbGlnaHQtZ3JleSc6ICcjYzBjMGMwJywKfTsKCi8vIFN1YnRsZSB3b29kIGdyYWluIC8gdGV4dHVyZSB2aWEgaW5saW5lIGdyYWRpZW50IG92ZXJsYXlzCmZ1bmN0aW9uIGZyYW1lVGV4dHVyKChoZXg6IHN0cmluZyk6IHN0cmluZyB7CiAgY29uc3QgciA9IHBhcnNlSW50KGhleC5zbGljZSgxLCAzKSwgMTYpOwogIGNvbnN0IGcgPSBwYXJzZUludChoZXguc2xpY2UoMywgNSksIDE2KTsKICBjb25zdCBiID0gcGFyc2VJbnQoaGV4LnNsaWNlKDUsIDcpLCAxNik7CiAgY29uc3QgbGlnaHRlciA9IGByZ2JhKCR7TWF0aC5taW4ociArIDE4LCAyNTUpfSwke01hdGgubWluKGcgKyAxOCwgMjU1KX0sJHtNYXRoLm1pbihiICsgMTgsIDI1NSl9LDAuNSdgOwogIGNvbnN0IGRhcmtlciA9IGByZ2JhKCR7TWF0aC5tYXgociAtIDEyLCAwKX0sJHtNYXRoLm1heChnIC0gMTIsIDApfSwke01hdGgubWF4KGIgLSAxMiwgMCk enthalpiesLDAuNClgOwogIHJldHVybiBgbGluZWFyLWdyYWRpZW50KDEzNWRlZywgJHtsaWdodGVyfSAwJSwgdHJhbnNwYXJlbnQgNDAlLCAydHJhbnNwYXJlbnQgNjAlLCAke2Rhcmtlcn0gMTAwJWA7Cn0KCnR5cGUgVmlld01vZGUgPSAnZnJhbWVkJyB8ICdyYXcnOwoKZXhwb3J0IGZ1bmN0aW9uIEZyYW1lZFByZXZpZXcoewogIGltYWdlVXJsLAogIHRpdGxlLAogIGZyYW1lQ29sb3IgPSAnYmxhY2snLAogIHNob3dNb3VudCA9IHRydWUsCiAgc2l6ZUxhYmVsLAogIG9yaWVudGF0aW9uID0gJ3BvcnRyYWl0JywKfTogewogIGltYWdlVXJsOiBzdHJpbmc7CiAgdGl0bGU6IHN0cmluZzsKICBmcmFtZUNvbG9yOiBzdHJpbmc7CiAgc2hvd01vdW50PzogYm9vbGVhbjsKICBzaXplTGFiZWw/OiBzdHJpbmc7CiAgb3JpZW50YXRpb24/OiBzdHJpbmc7Cn0pIHsKICBjb25zdCBbdmlld01vZGUsIHNldFZpZXdNb2RlXSA9IHVzZVN0YXRlPFZpZXdNb2RlPignZnJhbWVkJyk7CiAgY29uc3QgW2ltZ0xvYWRlZCwgc2V0SW1nTG9hZGVkXSA9IHVzZVN0YXRlKGZhbHNlKTsKCiAgY29uc3QgaGV4ID0gRlJBTUVfSEVYW2ZyYW1lQ29sb3JdIHx8IEZSQU1FX0hFWFsnYmxhY2snXTsKICBjb25zdCBpc0xpZ2h0ID0gZnJhbWVDb2xvciA9PT0gJ3doaXRlJyB8fCBmcmFtZUNvbG9yID09PSAnbGlnaHQtZ3JleScgfHwgZnJhbWVDb2xvciA9PT0gJ2FudGllLXNpbHZlcnUnOwogCiAgLy8gRnJhbWUgY3dpZHRoIHNjYWxlcyBiYXNlZCBvbiB2aWV3IOKAkyB0aGljayBlbm91Z2ggdG8gbG9vayByZWFsCiAgY29uc3QgZnJhbWVXaWR0aCA9ICdjbGFtcCgxMnB4LCAyLjV2d3MsIDI4cHgpJzsKICAvLyBNb3VudCAobWF0KSB3aWR0aAogIGNvbnN0IG1vdW50V2lkdGggPSBzaG93TW91bnQgPyAnY2xhbXAoMTZweCwgM3Z3LCA0MHB4KScgOiAnMHB4JzsKCiAgLy8gU2hhZG93IGZvciBkZXB0aAogIGNvbnN0IGZyYW1lU2hhZG93ID0gaXNMaWdodAogICAgPyAnMCA4cHggNDBweCByZ2JhKDAsMCwwLDAuMTIpLCAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4wOCknCiAgICA6ICcwIDEycHggNTBweCByZ2JhKDAsMCwwLDAuMjUpLCAwIDRweCAxNnB4IHJnYmEoMCwwLDAsMC4xNSknOwogCiAgLy8gSW5uZXIgZnJhbWUgZWRnZSBzaGFkb3cgKGJldmVsIGVmZmVjdCkKICBjb25zdCBpbm5lclNoYWRvdyA9IGlzTGlnaHQKICAgID8gJ2luc2V0IDFweCAxcHggM3B4IHJnYmEoMCwwLDAsMC4wOCksIGluc2V0IC0xcHggLTFweCAycHggcmdiYSgyNTUsMjU1LDI1NSwwLjUpJwogICAgOiAnaW5zZXQgMXB4IDFweCA0cHggcmdiYSgwLDAsMCwwLjMpLCBpbnNldCAtMXB4IC0xcHggMnB4IHJnYmEoMjU1LDI1NSwyNTUsMC4wNSknOwoKICBpZiAodmlld01vZGUgPT09ICdyYXcnKSB7CiAgICByZXR1cm4gKAogICAgICA8ZGl2IGNsYXNzTmFtZT0icmVsYXRpdmUiPgogICAgICAgIDxpbWcKICAgICAgICAgIHNyYz17aW1hZ2VVcmx9CiAgICAgICAgICBhbHQ9e3RpdGxlfQogICAgICAgICAgY2xhc3NOYW1lPSJ3LWZ1bGwgaC1hdXRvIHJvdW5kZWQtc20iCiAgICAgICAgLz4KICAgICAgICB7LyogVmlldyB0b2dnbGUgKi99CiAgICAgICAgPGRpdiBjbGFzc05hbWU9ImFic29sdXRlIGJvdHRvbS00IHJpZ2h0LTQgZmxleCBiZy1ibGFjay82MCBiYWNrZHJvcC1ibHVyLXNtIHJvdW5kZWQtc20gb3ZlcmZsb3ctaGlkZGVuIj4KCiAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFZpZXdNb2RlKCdxd2F3JycpfQogICAgICAgICAgICBjbGFzc05hbWU9InB4LTMgcHktMS41IHRleHQtWzEwcHhdIHRyYWNraW5nLXdpZGVyIHVwcGVyY2FzZSB0ZXh0LXdoaXRlLzkwIGJnLXdoaXRlLzIwIgogICAgICAgICAgPgogICAgICAgICAgICBJbWFnZQogICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICA8YnV0dG9uCiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFZpZXdNb2RlKCdmcmFtZWQnKX0KICAgICAgICAgICAgY2xhc3NOYW1lPSJweC0zIHB5LTEuNSB0ZXh0LVsxMHB4XSB0cmFja2luZy13aWRlciB1cHBlcmNhc2UgdGV4dC13aGl0ZS81MCBob3Zlcjp0ZXh0LXdoaXRlLzgwIHRyYW5zaXRpb24tY29sb3JzIgogICAgICAgICAgPgogICAgICAgICAgICBGcmFtZWQKICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgICk7CiAgfQoKICByZXR1cm4gKAogICAgPGRpdiBjbGFzc05hbWU9InJlbGF0aXZlIj4KICAgICAgey8qIFdhbGwgYmFja2dyb3VuZCAqL30KICAgICAgPGRpdgogICAgICAgIGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHktMTAgcHgtNiBtZDpweS0xNCBtZDpweC0xMCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi01MDAiCiAgICAgICAgc3R5bGU9e3sKICAgICAgICAgIGJhY2tncm91bmQ6ICdsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCAjZjBlZGU2IDAlLCAjZThlNGRjIDEwMCUpJywKICAgICAgICAgIG1pbkhlaWdodDogJzMwMHB4JywKICAgICAgICB9fQogICAgICA+CiAgICAgICAgPHsqIEZyYW1lIG91dGVyICovfQogICAgICAgIDxkaXYKICAgICAgICAgIGNsYXNzTmFtZT0icmVsYXRpdmUgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tNTAwIgogICAgICAgICAgc3R5bGU9e3sKICAgICAgICAgICAgcGFkZGluZzogZnJhbWVXaWR0aCwKICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBoZXgsCiAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogZnJhbWVUZXh0dXJlKGhleCksCiAgICAgICAgICAgIGJveFNoYWRvdyA6IGZyYW1lU2hhZG93LAogICAgICAgICAgICBtYXhXaWR0aDogJzg1JScsCiAgICAgICAgICB9fQogICAgICAgID4KICAgICAgICAgIDxkaXYKICAgICAgICAgICAgY2xhc3NOYW1lPSJhYnNvbHV0ZSBpbnNldC0wIHBvaW50ZXItZXZlbnRzLW5vbmUiCiAgICAgICAgICAgIHN0eWxlPXt7IGJveFNoYWRvdzogaW5uZXJTaGFkb3cgfX0KICAgICAgICAgIC8+CgogICAgICAgICAgPGRpdgogICAgICAgICAgICBjbGFzc05hbWU9InRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTUwMCIKICAgICAgICAgICAgc3R5bGU9e3sKICAgICAgICAgICAgICBwYWRkaW5nOiBtb3VudFdpZHRoLAogICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA6IHNob3dNb3VudCA/ICcjZmFmOWY2JyA6ICd0cmFuc3BhcmVudCcsCiAgICAgICAgICAgICAgYm94U2hhZG93IDogc2hvd01vdW50CiAgICAgICAgICAgICAgICA/ICdpbnNldCAwIDAgMCAxcHggcmdiYSgwLDAsMCwwLjA0KSwgaW5zZXQgMCAxcHggM3B4IHJnYmEoMCwwLDAsMC4wNicpJwogICAgICAgICAgICAgICAgOiAnbm9uZScsCiAgICAgICAgICAgIH19CiAgICAgICAgICA+CiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJyZWxhdGl2ZSBvdmVyZmxvdy1oaWRkZW4gYmctYmxhcnQtY3JlYW0iPgogICAgICAgICAgICAgIDxpbWcKICAgICAgICAgICAgICAgIHNyYz17aW1hZ2VVcmx9CiAgICAgICAgICAgICAgICBhbHQ9e3RpdGxlfQogICAgICAgICAgICAgICAgY2xhc3NOYW1lPXdgLXdpdGggZnVsbCBoLWF1dG8gYmxvY2sgdHJhbnNpdGlvbi1vcGFjaXR5IGR1cmF0aW9uLTUwMCAke2ltZ0xvYWRlZCA/ICdvcGFjaXR5LTEwMCcgOiAnb3BhY2l0eS0wJ31gfQogICAgICAgICAgICAgICAgb25Mb2FkPXsoKSA9PiBzZXRJbWdMb2FkZWQodHJ1ZSl9CiAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICB7IWltZ0xvYWRlZCAmJiAoCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYWJzb2x1dGUgaW5zZXQtMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciI+CiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LTYgaC02IGJvcmRlci0yIGJvcmRlci1ibGFydC1hc2gvMzAgYm9yZGVyLXQtYmxhcnQtYXNoIHJvdW5kZWQtZnVsbCBhbmltYXRlLXNwaW4iIC8+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICApfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2CiAgICAgICAgICBjbGFzc05hbWU9ImFic29sdXRlIGJvdHRvbS02IGxlZnQtMS8yIC10cmFuc2xhdGUteC0xLzIgdy1bNjAlXSBoLTQgcm91bmRlZC1mdWxsIgogICAgICAgICAgc3R5bGU9e3sKICAgICAgICAgICAgYmFja2dyb3VuZDogJ3JhZGlhbC1ncmFkaWVudChlbGxpcHNlLCByZ2JhKDAsMCwwLDAuMDYpIDAlLCAzZXRyYW5zcGFyZW50IDcwJSkJdG8sCiAgICAgICAgICB9fQogICAgICAgIC8+CiAgICAgIDwvZGl2PgoKICAgICAge3NpemVMYWJlbCAmJiAoCiAgICAgICAgPGRpdiBjbGFzc05hbWU9ImFic29sdXRlIHRvcC00IGxlZnQtNCBiZy1ibGFjay82MCBiYWNrZHJvcC1ibHVyLXNtIHB4LTMgcHktMS41IHJvdW5kZWQtc20iPgogICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LVsxMHB4XSB0cmFja2luZy13aWRlciB1cHBlcmNhc2UgdGV4dC13aGl0ZS84MCI+e3NpemVMYWJlbH08L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICkKfQogICAgICA8ZGl2IGNsYXNzTmFtZT0iYWJzb2x1dGUgYm90dG9tLTQgcmnaGl0LTQgZmxleCBiZy1ibGFjay82MCBiYWNrZHJvcC1ibHVyLXNtIHJvdW5kZWQtc20gb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICA8YnV0dG9uCiAgICAgICAgICBvbkNDbGljaz17KCkgPT4gc2V0Vmlld01vZGUoJ3JhdycpfQogICAgICAgICAgY2xhc3NOYW1lPSJweC0zIHB5LTEuNSB0ZXh0LVsxMHB4XSB0cmFja2luZy13aWRlciB1cHBlcmNhc2UgdGV4dC13aGl0ZS81MCBob3Zlcjp0ZXh0LXdoaXRlLzgwIHRyYW5zaXRpb24tY29sb3JzIgogICAgICAgID4KICAgICAgICAgIEltYWdlCiAgICAgICAgPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbgogICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0Vmlld01vZGUoJ2ZyYW1lZCcpfQogICAgICAgICAgY2xhc3NOYW1lPSJweC0zIHB5LTEuNSB0ZXh0LVsxMHB4XSB0cmFja2luZy13aWRlciB1cHBlcmNhc2UgdGV4dC13aGl0ZS85MCBiZy13aGl0ZS8yMCIKICAgICAgICA+CiAgICAgICAgICBGcmFtZWQKICAgICAgICA8L2J1dHRvbj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICApOwp9Cg==